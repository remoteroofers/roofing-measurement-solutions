<!-- ===== Property Details ===== -->
<div id="property-details">
  <h2>Property Details</h2>
  <label for="property-type">Property Type *</label>
  <select id="property-type">
    <option value="" selected disabled>Select property type</option>
    <option value="aerial">Aerial Square Roof Report</option>
    <option value="residential">Residential Roof Report</option>
    <option value="commercial">Commercial Roof Report</option>
  </select>
</div>

<!-- ===== Service Selection ===== -->
<div id="service-selection">
  <h2>Service Selection</h2>
  <label>
    <input type="radio" name="tier" value="standard"> Standard
  </label>
  <label>
    <input type="radio" name="tier" value="express"> Express
  </label>
  <label>
    <input type="radio" name="tier" value="rush"> Rush
  </label>
</div>

<!-- ===== Order Summary ===== -->
<div id="order-summary">
  <h3>Order Summary</h3>
  <p>Property Type: <span id="summary-type">-</span></p>
  <p>Service Tier: <span id="summary-tier">-</span></p>
  <p>Total: $<span id="summary-price">0</span></p>
</div>

<!-- ===== PayPal Checkout ===== -->
<div id="paypal-button-container"></div>

<script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD"></script>

<script>
  const pricing = {
    aerial: { standard: 10, express: 20, rush: 30 },
    residential: { standard: 17, express: 25, rush: 30 },
    commercial: { standard: 30, express: 35, rush: 45 }
  };

  const propertyTypeEl = document.getElementById('property-type');
  const tierEls = document.getElementsByName('tier');
  const summaryTypeEl = document.getElementById('summary-type');
  const summaryTierEl = document.getElementById('summary-tier');
  const summaryPriceEl = document.getElementById('summary-price');

  let selectedType = "";
  let selectedTier = "";

  function updateSummary() {
    summaryTypeEl.textContent = selectedType ? selectedType.replace(/^\w/, c => c.toUpperCase()) : "-";
    summaryTierEl.textContent = selectedTier ? selectedTier.charAt(0).toUpperCase() + selectedTier.slice(1) : "-";

    if (selectedType && selectedTier) {
      const price = pricing[selectedType][selectedTier];
      summaryPriceEl.textContent = price.toFixed(2);
    } else {
      summaryPriceEl.textContent = "0";
    }
  }

  propertyTypeEl.addEventListener('change', (e) => {
    selectedType = e.target.value;
    updateSummary();
  });

  tierEls.forEach(radio => {
    radio.addEventListener('change', (e) => {
      selectedTier = e.target.value;
      updateSummary();
    });
  });

  // PayPal Buttons
  paypal.Buttons({
    style: {
      layout: 'vertical',
      color:  'blue',
      shape:  'rect',
      label:  'pay'
    },
    createOrder: function(data, actions) {
      if (!selectedType || !selectedTier) {
        alert("Please select a property type and service tier.");
        return;
      }
      const amount = pricing[selectedType][selectedTier].toFixed(2);
      return actions.order.create({
        purchase_units: [{
          description: selectedType + " - " + selectedTier,
          amount: {
            value: amount
          }
        }]
      });
    },
    onApprove: function(data, actions) {
      return actions.order.capture().then(function(details) {
        alert("Payment completed by " + details.payer.name.given_name + "!");
        // Here you can redirect to a confirmation page or submit your form
      });
    },
    onError: function(err) {
      console.error(err);
      alert("Payment could not be completed.");
    }
  }).render('#paypal-button-container');
</script>
