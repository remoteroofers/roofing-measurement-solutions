<!-- Start of edited order_portal1.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <!-- retain original CSS/JS -->
  <meta charset="UTF-8">
  <title>Order Portal - Remote Roofers</title>
  <link rel="stylesheet" href="styles.css"> <!-- RETAINED -->
  <script src="scripts.js"></script> <!-- RETAINED -->
</head>
<body>

<!-- Property Details -->
<div id="property-details">
  <h2>Property Details</h2>
  <label>Property Address*</label>
  <input type="text" id="addr" required>

  <label>Property Type*</label>
  <select id="reportType" onchange="updatePrices()">
    <option value="">Select report type</option>
    <option value="aerial">Aerial Square Roof Report</option>
    <option value="residential">Residential Roof Report</option>
    <option value="commercial">Commercial Roof Report</option>
  </select>
</div>

<!-- Service Selection -->
<div id="service-selection">
  <h2>Choose Your Service Tier</h2>

  <button onclick="selectService('standard')">Standard</button>
  <button onclick="selectService('express')">Express</button>
  <button onclick="selectService('rush')">Rush</button>

  <p id="selectedService">Selected Service: None</p>
  <p id="estimatedDelivery">Estimated Delivery: -</p>
  <p id="priceDisplay">Total: $0</p>
</div>

<!-- Upload & Review (unchanged; retained UI) -->
<div id="upload-review">
  <h2>Upload Property Images</h2>
  <input type="file" id="images" multiple accept="image/*">
  <div id="order-summary"></div>
</div>

<!-- Secure Payment -->
<div id="payment-section">
  <h2>Secure Payment (PayPal)</h2>

  <!-- PAYPAL BUTTON -->
  <div id="paypal-button-container"></div>
</div>

<script>
  let selectedService = "";
  let selectedReport = "";
  let pricing = {
    aerial:    {standard:10, express:20, rush:30},
    residential:{standard:17, express:25, rush:30},
    commercial:{standard:30, express:35, rush:45}
  };

  function updatePrices() {
    selectedReport = document.getElementById("reportType").value;
    calculateTotal();
  }

  function selectService(service) {
    selectedService = service;
    document.getElementById("selectedService").textContent = "Selected Service: " + service.charAt(0).toUpperCase()+service.slice(1);
    calculateTotal();
  }

  function calculateTotal() {
    if (!selectedReport || !selectedService) {
      document.getElementById("priceDisplay").textContent = "Total: $0";
      return;
    }
    let price = pricing[selectedReport][selectedService];
    document.getElementById("priceDisplay").textContent = "Total: $" + price;
  }
</script>

<!-- Load the PayPal Checkout JS -->
<script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID"></script>

<script>
  paypal.Buttons({
    style: { layout: 'vertical' },
    createOrder: function(data, actions) {
      // Set up transaction amount based on selected pricing
      let amt = pricing[selectedReport] ? pricing[selectedReport][selectedService] : 0;
      return actions.order.create({
        purchase_units: [{
          amount: { value: amt.toString() }
        }]
      });
    },
    onApprove: function(data, actions) {
      return actions.order.capture().then(function(details) {
        alert('Payment completed by ' + details.payer.name.given_name);
      });
    }
  }).render('#paypal-button-container');
</script>

</body>
</html>
